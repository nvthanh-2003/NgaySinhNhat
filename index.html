<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√†nh cho Em, M√≥n Qu√† Y√™u Th∆∞∆°ng Nh·∫•t</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* T·∫£i font ch·ªØ Playfair Display cho phong c√°ch sang tr·ªçng */
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&display=swap');

        /* --- C√†i ƒë·∫∑t Chung: N·ªÅn V√†ng Kem v√† Hoa H·ªìng --- */
        body {
            font-family: 'Playfair Display', serif; /* Font ch·ªØ ch√≠nh */
            /* N·ªÅn m√†u kem nh·∫°t */
            background-color: #f8f4e3;
            color: #5d4037; /* M√†u ch·ªØ n√¢u ƒë·∫≠m */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            /* Th√™m h·ªça ti·∫øt hoa h·ªìng ·ªü g√≥c (c·∫ßn h√¨nh ·∫£nh) - T√¥i s·∫Ω s·ª≠ d·ª•ng CSS gi·∫£ l·∫≠p m√†u */
            background-image: radial-gradient(circle at 100% 100%, #fffaf0 1%, transparent 10%),
            radial-gradient(circle at 0% 0%, #fffaf0 1%, transparent 10%),
            radial-gradient(circle at 0% 100%, #f4e8d8 1%, transparent 10%),
            radial-gradient(circle at 100% 0%, #f4e8d8 1%, transparent 10%);
            background-size: 50% 50%;
            background-repeat: no-repeat;
            background-position: top left, bottom right, bottom left, top right;
        }

        /* --- Thi·ªáp Ch√∫c M·ª´ng (Khung Ch√≠nh) --- */
        #greetingCard {
            background-color: #fffaf0; /* Tr·∫Øng ng√† */
            border-radius: 4px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            padding: 3rem 2.5rem;
            max-width: 650px; /* K√≠ch th∆∞·ªõc l·ªõn h∆°n cho phong c√°ch banner */
            width: 90%;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        /* --- Hi·ªáu ·ª®ng Khung V√†ng Kim (Quan tr·ªçng nh·∫•t) --- */
        #greetingCard::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 5px solid #daa520; /* Vi·ªÅn v√†ng ƒë·ªìng ngo√†i */
            pointer-events: none;
            z-index: 5;
        }
        #greetingCard::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border: 2px solid #f0e68c; /* Vi·ªÅn v√†ng nh·∫°t h∆°n b√™n trong */
            pointer-events: none;
            z-index: 5;
        }

        /* --- Ti√™u ƒê·ªÅ --- */
        #title {
            color: #b8860b; /* M√†u v√†ng ƒë·ªìng ƒë·∫≠m */
            font-weight: 700;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            line-height: 1.2;
        }

        /* --- N√∫t M·ªü Qu√† (Phong c√°ch ch·∫°m kh·∫Øc) --- */
        #showButton {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            color: #5d4037;
            background-color: #fffaf0;
            border: 2px solid #daa520;
            box-shadow: 0 4px 8px rgba(184, 134, 11, 0.3);
            border-radius: 50px;
            padding: 10px 30px;
            transition: all 0.3s ease;
        }

        #showButton:hover {
            background-color: #f0e68c;
            transform: translateY(-2px);
        }

        /* --- N·ªôi dung v√† Video (T√πy ch·ªânh font) --- */
        #message p {
            font-size: 1.1rem;
            font-family: 'Playfair Display', serif;
            color: #5d4037;
        }

        /* ƒê·∫£m b·∫£o video trong container n·∫±m ch√≠nh gi·ªØa v√† c√≥ vi·ªÅn */
        #videoContainer {
            /* Lo·∫°i b·ªè vi·ªÅn bo Tailwind c≈© */
            border-radius: 4px !important;
            border: 3px solid #daa520; /* Vi·ªÅn v√†ng cho video */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 80%;
            margin: 2rem auto;
            position: relative;
            z-index: 10;
        }

        #videoContainer video {
            width: 100%;
            height: auto;
            display: block;
        }

        /* --- Confetti (Gi·ªØ nguy√™n) --- */
        #confetti {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        /* ·∫®n/Hi·ªán message */
        #message {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1.5s ease-in-out, transform 1s ease-out;
            text-align: left;
        }
        #message.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .hidden-element {
            display: none !important;
        }

        /* N√∫t Play th·ªß c√¥ng n·∫øu Autoplay b·ªã ch·∫∑n */
        #manualPlayButton {
            font-family: 'Playfair Display', serif;
            background-color: #b8860b !important;
            color: white !important;
            border-radius: 5px !important;
            padding: 8px 15px;
            margin-top: 1rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        /* --- ƒêi·ªÅu ch·ªânh cho m√†n h√¨nh nh·ªè --- */
        @media (max-width: 640px) {
            #title {
                font-size: 2rem;
            }
            #greetingCard {
                padding: 2rem 1.5rem;
            }
            #showButton {
                font-size: 1rem;
            }
            #message p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>

<div id="greetingCard">
    <h1 id="title">D√†nh cho Em, M√≥n Qu√† Y√™u Th∆∞∆°ng Nh·∫•t</h1>

    <div id="initialMessage">
        <p class="mb-4 leading-relaxed italic text-lg">G·ª≠i t·ªõi em,</p>
        <p class="mb-6 leading-relaxed">G·ª≠i l·ªùi ch√∫c t·ªët ƒë·∫πp nh·∫•t ƒë·∫øn m·ªôt ng∆∞·ªùi xinh ƒë·∫πp v√† l√† ng∆∞·ªùi tr√¢n tr·ªçng nh·∫•t ƒë·ªëi v·ªõi anh! Ch√∫c em sinh nh·∫≠t th·∫≠t ·∫•m √°p v√† h·∫°nh ph√∫c nh√©. Ch√∫c em tu·ªïi m·ªõi lu√¥n r·∫°ng r·ª°, h·∫°nh ph√∫c, v√† ƒë·∫°t ƒë∆∞·ª£c m·ªçi ƒëi·ªÅu m√¨nh mong mu·ªën. Tuy ·ªü xa kh√¥ng ƒë√≥n sinh nh·∫≠t ƒë∆∞·ª£c c√πng nh∆∞ng v·∫´n mong nh·ªØng ƒëi·ªÅu tuy·ªát v·ªùi ƒë∆∞·ª£c g·ª≠i ƒë·∫øn v·ªõi em.</p>
    </div>

    <button id="showButton" onclick="revealMessage()"
            class="mt-6 hover:shadow-xl focus:outline-none transition duration-300 ease-in-out">
        Ch·∫°m ƒê·ªÉ M·ªü Tr·∫£i Tim Anh
    </button>

    <div id="videoContainer" class="hidden-element rounded-xl overflow-hidden mb-4">
        <video id="birthdayVideo" controls>
            <source src="videoChucMung.mp4" type="video/mp4">
            Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ th·∫ª video.
        </video>
    </div>


    <div id="message" class="hidden-element">
        <img id="personImage" src="anh2.jpg" alt="Ng∆∞·ªùi t√¥i y√™u" class="mx-auto" style="border-radius: 50%; width: 120px; height: 120px; object-fit: cover; margin-bottom: 1.5rem; border: 4px solid #f0e68c;">

        <p class="mb-3 leading-relaxed">M√≥n qu√† th·ª© hai d√†nh cho em:</p>
        <p class="mb-3 leading-relaxed">ƒê√¢y l√† t·∫•t c·∫£ nh·ªØng g√¨ anh mu·ªën n√≥i sau khi em xem video. Em l√† ngu·ªìn ƒë·ªông l·ª±c v√† ni·ªÅm vui l·ªõn nh·∫•t c·ªßa anh. M·ªói kho·∫£nh kh·∫Øc b√™n em ƒë·ªÅu l√† qu√Ω gi√°. H√£y s·ªëng th·∫≠t vui v·∫ª v√† h·∫°nh ph√∫c, v√¨ em x·ª©ng ƒë√°ng v·ªõi m·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp tr√™n th·∫ø gi·ªõi n√†y.</p>
        <p class="signature" style="margin-top: 1.5rem; font-style: italic; font-weight: 600; color: #b8860b; text-align: right;">Ng√†y tuy·ªát v·ªùi nh·∫•t!</p>

        <div class="emoji-section" style="margin: 2rem 0; font-size: 2rem; display: flex; justify-content: space-around;">
            <a href="ToTinh.html" class="hover:scale-110 transition">üíñ</a>
            <a href="PhaoHoa.html" class="hover:scale-110 transition">üéâ</a>
            <a href="BanhSinhNhat.html" class="hover:scale-110 transition">üéÇ</a>
            <a href="HopQua.html" class="hover:scale-110 transition">üéÅ</a>
        </div>
    </div>

</div>

<canvas id="confetti"></canvas>

<script>
    // ƒê·ªãnh nghƒ©a c√°c bi·∫øn DOM
    const initialMessage = document.getElementById('initialMessage');
    const message = document.getElementById('message');
    const showButton = document.getElementById('showButton');
    const videoContainer = document.getElementById('videoContainer');
    const birthdayVideo = document.getElementById('birthdayVideo');
    const title = document.getElementById('title');

    // Kh·ªüi t·∫°o Canvas Confetti (Gi·ªØ nguy√™n logic c·ªßa b·∫°n)
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let particles = [];
    const colors = ['#daa520', '#b8860b', '#f0e68c', '#fffaf0', '#e90064', '#f44336']; // Th√™m m√†u v√†ng kim

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function ConfettiParticle() {
        this.x = canvas.width / 2;
        this.y = canvas.height / 2;
        this.radius = Math.random() * 8 + 2;
        this.color = colors[Math.floor(Math.random() * colors.length)];
        this.tilt = Math.floor(Math.random() * 10) - 10;
        this.tiltAngle = 0;
        this.tiltAngleIncrement = Math.random() * 0.1 + 0.05;
        this.velocity = {
            x: (Math.random() - 0.5) * 15,
            y: (Math.random() * -18) - 5
        };
        this.gravity = 0.5;
        this.dampening = 0.9;
    }

    ConfettiParticle.prototype.update = function() {
        this.velocity.y += this.gravity;
        this.velocity.x *= this.dampening;
        this.x += this.velocity.x;
        this.y += this.velocity.y;
        this.tiltAngle += this.tiltAngleIncrement;
        this.tilt = Math.sin(this.tiltAngle) * 25;
    };

    ConfettiParticle.prototype.draw = function() {
        ctx.beginPath();
        ctx.lineWidth = this.radius * 2;
        ctx.strokeStyle = this.color;
        ctx.moveTo(this.x + this.tilt, this.y);
        ctx.lineTo(this.x, this.y + this.tilt);
        ctx.stroke();
    };

    function animateConfetti() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => p.y < canvas.height);

        for (let i = 0; i < particles.length; i++) {
            particles[i].update();
            particles[i].draw();
        }

        if (particles.length > 0) {
            requestAnimationFrame(animateConfetti);
        }
    }

    function shootConfetti() {
        const count = 75;
        for (let i = 0; i < count; i++) {
            particles.push(new ConfettiParticle());
        }
        animateConfetti();
    }

    // --- LOGIC CHO T∆Ø∆†NG T√ÅC THI·ªÜP ---

    // H√†m hi·ªÉn th·ªã th√¥ng ƒëi·ªáp v√† ph√°o hoa
    function showMessageAndConfetti() {
        // ·∫®n video v√† container
        videoContainer.classList.add('hidden-element');

        // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ
        title.textContent = "L·ªùi Ch√∫c T·ª´ Tr√°i Tim Anh";

        // Hi·ªÉn th·ªã th√¥ng ƒëi·ªáp cu·ªëi c√πng
        message.classList.remove('hidden-element');
        setTimeout(() => {
            message.classList.add('visible');
        }, 100);

        // K√≠ch ho·∫°t ph√°o hoa
        shootConfetti();
    }

    // S·ª± ki·ªán khi video k·∫øt th√∫c
    birthdayVideo.addEventListener('ended', () => {
        showMessageAndConfetti();
    });

    // S·ª± ki·ªán khi ng∆∞·ªùi d√πng t·∫Øt video (b·∫•m n√∫t d·ª´ng ho·∫∑c tho√°t fullscreen)
    birthdayVideo.addEventListener('pause', () => {
        if (birthdayVideo.currentTime > 0 && birthdayVideo.currentTime < birthdayVideo.duration && !message.classList.contains('visible')) {
            const confirmSkip = window.confirm('B·∫°n c√≥ mu·ªën b·ªè qua video v√† xem th√¥ng ƒëi·ªáp ch√∫c m·ª´ng kh√¥ng?');
            if (confirmSkip) {
                birthdayVideo.pause();
                birthdayVideo.currentTime = 0;
                showMessageAndConfetti();
            } else {
                birthdayVideo.play().catch(e => console.error("Could not resume play:", e));
            }
        }
    });

    // H√†m ƒë∆∞·ª£c g·ªçi khi nh·∫•n n√∫t "M·ªü qu√†"
    function revealMessage() {
        // 1. ·∫®n n·ªôi dung kh·ªüi ƒë·∫ßu v√† n√∫t
        initialMessage.classList.add('hidden-element');
        showButton.classList.add('hidden-element');

        // 2. Hi·ªán container video v√† ph√°t video
        videoContainer.classList.remove('hidden-element');

        // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ
        title.textContent = "M√≥n Qu√† ƒê·∫ßu Ti√™n D√†nh Cho Em";


        if (birthdayVideo.src || birthdayVideo.querySelector('source') && birthdayVideo.querySelector('source').src) {
            birthdayVideo.currentTime = 0;

            birthdayVideo.play().catch(error => {
                console.warn("Autoplay b·ªã ch·∫∑n.");

                // Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu Autoplay b·ªã ch·∫∑n
                title.textContent = "Nh·∫•n Play ƒë·ªÉ xem m√≥n qu√† ƒë·∫ßu ti√™n!";

                // Th√™m n√∫t Play th·ªß c√¥ng
                const manualPlayButton = document.createElement('button');
                manualPlayButton.textContent = '‚ñ∂Ô∏è Xem Video';
                manualPlayButton.id = 'manualPlayButton';
                manualPlayButton.onclick = () => {
                    birthdayVideo.play().then(() => {
                        manualPlayButton.remove();
                        title.textContent = "M√≥n Qu√† ƒê·∫ßu Ti√™n D√†nh Cho Em";
                    }).catch(e => console.error("L·ªói ph√°t video:", e));
                };
                videoContainer.after(manualPlayButton);
            });
        }

        // Ch·∫∑n s·ª± ki·ªán click l·∫∑p l·∫°i
        showButton.onclick = null;
    }
</script>

</body>
</html>