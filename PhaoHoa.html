<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√°o Hoa ƒÇn M·ª´ng! üéâ</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Quan tr·ªçng ƒë·ªÉ canvas chi·∫øm to√†n m√†n h√¨nh */
            background-color: #000; /* N·ªÅn t·ªëi cho ph√°o hoa n·ªïi b·∫≠t */
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
        }

        /* Canvas s·∫Ω l√† n∆°i v·∫Ω ph√°o hoa */
        canvas {
            display: block;
        }

        /* Ti√™u ƒë·ªÅ ƒÉn m·ª´ng */
        #celebration-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            font-size: 4em;
            color: #FFD700; /* M√†u v√†ng kim */
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 165, 0, 0.6);
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            animation: pulse 1.5s infinite alternate;
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1.05);
            }
        }
    </style>
</head>
<body>
<body>
<div id="celebration-text">
    CH√öC M·ª™NG SINH NH·∫¨T! üéâ
</div>

<canvas id="fireworksCanvas"></canvas>

<script>
    const canvas = document.getElementById('fireworksCanvas');
    const ctx = canvas.getContext('2d');

    let W = window.innerWidth;
    let H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;

    window.addEventListener('resize', () => {
        W = window.innerWidth;
        H = window.innerHeight;
        canvas.width = W;
        canvas.height = H;
    });

    // --- H√ÄM T·∫†O M√ÄU S·∫ÆC NG·∫™U NHI√äN ---
    function randomColor() {
        const r = Math.floor(Math.random() * 255);
        const g = Math.floor(Math.random() * 255);
        const b = Math.floor(Math.random() * 255);
        return `rgb(${r},${g},${b})`;
    }

    // --- L·ªöP H·∫†T PH√ÅO HOA (Particle) ---
    class Particle {
        constructor(x, y, color, angle, speed) {
            this.x = x;
            this.y = y;
            this.color = color || randomColor();
            this.radius = Math.random() * 1.5 + 0.5;

            // T√≠nh to√°n v·∫≠n t·ªëc d·ª±a tr√™n g√≥c v√† t·ªëc ƒë·ªô
            this.velocity = {
                x: Math.cos(angle) * speed,
                y: Math.sin(angle) * speed
            };

            this.alpha = 1; // ƒê·ªô trong su·ªët ban ƒë·∫ßu
            this.friction = 0.98; // Gi·∫£m nh·∫π l·ª±c c·∫£n
            this.gravity = 0.02; // *** TR·ªåNG L·ª∞C R·∫§T NH·ªé, G·∫¶N NH∆Ø KH√îNG TR·ªåNG L·ª∞C ***
        }

        draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
            ctx.fillStyle = this.color;
            ctx.fill();
            ctx.restore();
        }

        update() {
            // Gi·∫£m v·∫≠n t·ªëc (l·ª±c c·∫£n kh√¥ng kh√≠)
            this.velocity.x *= this.friction;
            this.velocity.y *= this.friction;

            // Th√™m tr·ªçng l·ª±c (r·∫•t √≠t)
            this.velocity.y += this.gravity;

            // C·∫≠p nh·∫≠t v·ªã tr√≠
            this.x += this.velocity.x;
            this.y += this.velocity.y;

            // Gi·∫£m ƒë·ªô trong su·ªët (t√†n r·∫•t ch·∫≠m)
            this.alpha -= 0.005; // *** GI·∫¢M ƒê·ªò ALPHA R·∫§T CH·∫¨M (0.005) ***
        }
    }

    let particles = [];

    // --- H√ÄM T·∫†O PH√ÅO HOA PHUN L√äN CAO ---
    function createHighFountain(x, y, color) {
        const particleCount = 80;
        // *** T·ªêC ƒê·ªò BAN ƒê·∫¶U CAO H∆†N ƒê·ªÇ PHUN L√äN CAO ***
        const baseSpeed = 5;

        for (let i = 0; i < particleCount; i++) {
            // G√≥c phun: T·∫≠p trung quanh 270 ƒë·ªô (th·∫≥ng ƒë·ª©ng) v·ªõi m·ªôt ƒë·ªô l·ªách nh·ªè (t·ªèa r·ªông)
            // G√≥c t·ª´ 240 ƒë·ªô ƒë·∫øn 300 ƒë·ªô.
            const angleDeg = Math.random() * 60 + 240;
            const angleRad = (Math.PI / 180) * angleDeg;

            // V·∫≠n t·ªëc ng·∫´u nhi√™n d·ª±a tr√™n t·ªëc ƒë·ªô c∆° s·ªü
            const speed = baseSpeed * (Math.random() * 0.5 + 0.75);

            particles.push(new Particle(x, y, color, angleRad, speed));
        }
    }

    // --- V√íNG L·∫∂P HO·∫†T H√åNH CH√çNH ---
    function animate() {
        requestAnimationFrame(animate);

        // X√≥a Canvas v·ªõi ƒë·ªô trong su·ªët th·∫•p (0.1)
        ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
        ctx.fillRect(0, 0, W, H);

        // L·ªçc c√°c h·∫°t ƒë√£ t√†n
        particles = particles.filter(p => p.alpha > 0);

        // C·∫≠p nh·∫≠t v√† v·∫Ω
        particles.forEach(p => {
            p.update();
            p.draw();
        });

        // T·ª± ƒë·ªông b·∫Øn ph√°o hoa t·ª´ 1/3 d∆∞·ªõi c√πng m√†n h√¨nh v·ªõi t·∫ßn su·∫•t ·ªïn ƒë·ªãnh
        if (Math.random() < 0.05) {
            const x = Math.random() * W;
            // B·∫Øn t·ª´ 1/3 d∆∞·ªõi c√πng (t·ª´ H * 0.66 ƒë·∫øn H)
            const y = Math.random() * (H / 3) + (H * 0.66);
            createHighFountain(x, y);
        }
    }

    animate();

    // B·∫Øn v√†i qu·∫£ ngay l√∫c ƒë·∫ßu t·ª´ ƒë√°y m√†n h√¨nh
    for (let i = 0; i < 6; i++) {
        setTimeout(() => {
            const x = Math.random() * W;
            const y = H - 5; // B·∫Øn t·ª´ g·∫ßn s√°t ƒë√°y m√†n h√¨nh
            createHighFountain(x, y);
        }, i * 250);
    }

    // ... Ph·∫ßn code Ph√°o hoa gi·ªØ nguy√™n ...

    // === CODE KH·∫ÆC PH·ª§C L·ªñI AUTOPLAY (T·ªëi ∆∞u) ===
    document.addEventListener('DOMContentLoaded', () => {
        const music = document.getElementById('backgroundMusic');
        const audioMessage = document.getElementById('audio-message');

        const playPromise = music.play();

        if (playPromise !== undefined) {
            playPromise.then(() => {
                // Autoplay th√†nh c√¥ng
            }).catch(error => {
                // Autoplay b·ªã ch·∫∑n -> Hi·ªÉn th·ªã th√¥ng b√°o v√† l·∫Øng nghe t∆∞∆°ng t√°c
                audioMessage.style.display = 'block';

                const enableMusic = () => {
                    music.play();
                    audioMessage.style.display = 'none'; // ·∫®n th√¥ng b√°o sau khi ph√°t
                    document.body.removeEventListener('click', enableMusic);
                    document.body.removeEventListener('touchstart', enableMusic);
                };

                // L·∫Øng nghe s·ª± ki·ªán click/touch ƒë·∫ßu ti√™n tr√™n body
                document.body.addEventListener('click', enableMusic);
                document.body.addEventListener('touchstart', enableMusic);
            });
        }
    });
    // =================================================================
</script>

</body>
</html>
</script>

</body>
</html>